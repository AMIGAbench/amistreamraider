ASRServer History


v0.3.8

- patched twitch.py plugin to fix client integrity token aquisition
- added chromium browser as fallback option for CIT aquisition

v0.3.7

- removed FIFO mechanics (used to switch between placeholder and livestream to eliminate a/v drifts due to parallel processing)
  -> mpv will start in two instances: #1 plays the placeholder #2 plays the livestream

v0.3.6

- added OFFSCREEN optimization (+genpts -use_wallclock_as_timestamps)

v0.3.5

- extended Device Code Flow implementation: added refresh token
- automatic token refresh via python script

v0.3.4

- DIRECT Mode fixed (was broken in the process of reintegrating OFFSCREEN Mode)

v0.3.3

- placeholder integrated for smooth mpv startup in case of PreRoll ad (mpv startup with blackscreen results in 1FPS playback)
- tcp wrapper now kills old existing processes at client startup

v0.3.2

- replaced tcp sink with tcp wrapper
- streamlined transcoder: tcp wrapper fully controls the process (startup/kill)
  --> tcp wrapper kickstarts the transcoder at "Client connected" and kills it after disconnect

v0.3.1

- added mpv delay for smooth startup

v0.3.0

- reintroduced OFFSCREEN mode

v0.2.11

- complete Server overhaul: removed obsolete/dead Client Secret code
- extended search functionality: search for categories (Just Chatting, Minecraft, Retro, etc)

v0.2.10

- Latency optmizations (now 18sec behind web stream)
- added "--hls-segment-stream-data --hls-live-edge 2 --stream-segment-threads 3" to streamlink cmd
- changed mbuffer default to 4M

v0.2.9

- removed tcp sink
- added tcp wrapper with accept loop: Wrapper will wait for client connect and trigger transcoder chain. 
After disconnect it will reset, then kill transcoder chain and and accept new client connection.

v0.2.8

- removed ts joiner and replaced it with simple mkfifo switch at the beginning of the transcoder chain

v0.2.7

- added "-af aresample:..." to ffmpeg for further a/v correction 

v0.2.6

- added cleanup routine in case of dangling/zombie transcoder runs of previous instances
- added fuser 

v0.2.5

- relocated Input Switch before ffmpeg PS encoder
- fixed /stop endpoint (obsolete placeholder function references removed)
- added fflags genpts into first ffmpeg stage to iron out a/v drifts

v0.2.4

- complete overhaul of manager.py
- simplified transcoderchain to streamlined "one liner"
- tcp sink input switch added between local placeholder feed and real live feed (a/v drifts still present at switch)
- metrics counter integrated (on amiga set = 0 as it instantly gets local MPG1 placeholder feed)

v0.2.3

- Updated to streamlink version 7.6.0
- removed "--twitch-disable-ads" from streamlink command (deprecated)

v0.2.2

- added xvfb and Chromium webbrowser (streamlink aquires Client Integrity Token at runtime)

v.0.2.0

- removed OFFSCREEN Mode
- Streamlink updated to 7.6.0
- simplified transcoder chain

v0.1.19

- --hls-segment-threads 5 parameter added to streamlink to further stabilize discontinuities

v0.1.18

- stabilized Stream resume after Commercial breaks (--cache=no, --demuxer=lavf, --force-window=yes)

v0.1.15

- replaced ffplay with mpv (better buffering and streaming support)

v0.1.5

- Docker Compose set to streamlink 6.2.2
- streamlink output set to --stdout and -f mpegts to guarantee clean ffplay startup
- removed xinfowin and changed rendering into fullscreen (now works on headless servers too)

v0.1.4

- made auth persistent -> ./data/auth/ will be created on host machine
		=> "Signed In" will survive host/docker restarts

v0.1.3

- reverted back to ffmpeg 7.x
- removed fifo/afifo due to a/v desync issues
- xvfb and pulse will now be initialized at server startup just once, instead of each transcoder run

v0.1.2:

- reverted back to ffmpeg 6.1 due to afifo/fifo modules (not present in ffmpeg 7.x)
- OFFSCREEN transcoder uses fifo buffering -> much smoother playback


v0.1.1:

- fixated 24FPS on both transcoders


v0.1.0:

-first beta release
